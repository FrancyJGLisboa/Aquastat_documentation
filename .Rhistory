knitr::include_graphics("images/aqua_methodology_new.png")
# **AQUASTAT data**
The Chapter \@ref(AquastatBaseline) will treat the  module as well as its data sets and data tables in more details. However, after describing the current SWS resources involved in the AQUASTAT - SWS migration framework, it is important to have a look at the data collected and disseminated by AQUASTAT. with the validation from the AQUASTAT focal point, The ESS - SWS counterpart has adapted and updated a reference table with the following information:
knitr::include_graphics("images/aqua_methodology_new.png")
require(data.table)
# lta <- c(4150L, 4151L, 4154L, 4155L, 4156L, 4157L, 4159L, 4160L,
#          4161L, 4162L, 4164L, 4165L, 4168L, 4170L, 4171L, 4172L, 4173L,
#          4174L, 4176L, 4177L, 4178L, 4182L, 4185L, 4187L, 4188L, 4192L,
#          4193L, 4194L, 4195L, 4196L, 4452L, 4453L, 4509L, 4536L,
#          4549L)
d = data.table::fread("tables/aquastat_meta_FL_sources.csv")
knitr::kable(x = d,
caption = paste("The description of AQUASTAT data"),
booktabs = TRUE)
require(data.table)
# lta <- c(4150L, 4151L, 4154L, 4155L, 4156L, 4157L, 4159L, 4160L,
#          4161L, 4162L, 4164L, 4165L, 4168L, 4170L, 4171L, 4172L, 4173L,
#          4174L, 4176L, 4177L, 4178L, 4182L, 4185L, 4187L, 4188L, 4192L,
#          4193L, 4194L, 4195L, 4196L, 4452L, 4453L, 4509L, 4536L,
#          4549L)
d = data.table::fread("tables/aquastat_meta_FL_sources.csv")
knitr::kable(x = d[, Comments := NULL],
caption = paste("The description of AQUASTAT data"),
booktabs = TRUE)
require(dplyr)
zeroel <- c(4308, 4309, 4310, 4312, 4316, 4314, 4315, 4264, 4265, 4451)
d = readr::read_csv("tables/aquastat_meta_FL_sources.csv")
knitr::kable(x = d %>% dplyr::filter(element_code %in%  zeroel),
caption = paste("AQUASTAT variables with missing values made zero before calculations IF the time-series was fully empty"),
booktabs = TRUE)
require(dplyr)
lta <- c(4150L, 4151L, 4154L, 4155L, 4156L, 4157L, 4159L, 4160L,
4161L, 4162L, 4164L, 4165L, 4168L, 4170L, 4171L, 4172L, 4173L,
4174L, 4176L, 4177L, 4178L, 4182L, 4185L, 4187L, 4188L, 4192L,
4193L, 4194L, 4195L, 4196L, 4452L, 4453L, 4509L, 4536L,
4549L)
d = readr::read_csv("tables/aquastat_meta_FL_sources.csv")
knitr::kable(x = d %>% dplyr::filter(element_code %in%  lta),
caption = paste("The Long-term average variables in AQUASTAT"),
booktabs = TRUE)
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
FAOSTAT [label = ' Input \n Downloaded FAOSTAT data \n from FAOSTAT website', shape = folder, fillcolor = Beige]
FAOSTATSWS [label = 'FAOSTAT - AQUASTAT mapping \n using aquastat_faostat_mapping data table', fillcolor = LightBlue]
SWSenr [label = 'Input \n AQUASTAT dataset \n from SWS',  shape = folder, fillcolor = Beige]
# Output
Dataset1 [label = 'SWS AQUASTAT dataset \n with recoded FAOSTAT data', shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{SWSenr} -> Dataset1
{FAOSTAT} -> FAOSTATSWS
{FAOSTATSWS} -> Dataset1
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
FAOSTAT [label = ' Input: \n Downloaded FAOSTAT data \n from FAOSTAT website', shape = folder, fillcolor = Beige]
FAOSTATSWS [label = ' Processing: \n FAOSTAT - AQUASTAT mapping \n using aquastat_faostat_mapping data table', fillcolor = LightBlue]
SWSenr [label = 'Input: \n AQUASTAT dataset \n from SWS',  shape = folder, fillcolor = Beige]
# Output
Dataset1 [label = 'SWS AQUASTAT dataset \n with recoded FAOSTAT data', shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{SWSenr} -> Dataset1
{FAOSTAT} -> FAOSTATSWS
{FAOSTATSWS} -> Dataset1
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
FAOSTAT [label = ' Input: \n Downloaded FAOSTAT data \n from FAOSTAT website', shape = folder, fillcolor = Beige]
FAOSTATSWS [label = ' Processing: \n FAOSTAT - AQUASTAT mapping \n using aquastat_faostat_mapping data table', fillcolor = LightBlue]
SWSenr [label = 'Input: \n downloaded AQUASTAT dataset \n from SWS',  shape = folder, fillcolor = Beige]
# Output
Dataset1 [label = 'SWS-AQUASTAT dataset \n with recoded FAOSTAT data', shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{SWSenr} -> Dataset1
{FAOSTAT} -> FAOSTATSWS
{FAOSTATSWS} -> Dataset1
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
FAOSTAT [label = ' Input: \n Downloaded FAOSTAT data \n from FAOSTAT website', shape = folder, fillcolor = Beige]
FAOSTATSWS [label = ' Processing: \n FAOSTAT - AQUASTAT mapping \n using aquastat_faostat_mapping data table', fillcolor = LightBlue]
SWSenr [label = 'Input: \n downloaded AQUASTAT dataset \n from SWS',  shape = folder, fillcolor = Beige]
# Output
Dataset1 [label = 'Output: \n SWS-AQUASTAT dataset \n with recoded FAOSTAT data', shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{SWSenr} -> Dataset1
{FAOSTAT} -> FAOSTATSWS
{FAOSTATSWS} -> Dataset1
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
Quest[label = ' Source: \n Data from questionnaire ', shape = folder, fillcolor = Beige]
Literature [label = ' Source: \n Data from literature', shape = folder, fillcolor = Beige]
otherDB [label = ' Source: \n Da from other databases', shape = folder, fillcolor = Beige]
QH [label = 'Processing: \n Questionnaire harvesting \n by CIO - SWS', shape = folder, fillcolor = LightBlue]
AWS [label = 'Source: \n Aquastat Working System', shape = folder, fillcolor = Beige]
SWS [label = 'Source: \n Statistical Working System \n must have \n 1. geographicAreaM49, 2. aquastatElement, 3. timePointYears, 4. flagObservationStatus or flagAquastat', shape = folder, fillcolor = Beige]
FAOSTATDB [label = ' Processing: \n FAOSTAT data', shape = folder, fillcolor = Beige]
Rbase [label = ' Processing: \n faoswsAquastatBaseline \n 1. FAOSTAT annexation, 2. Calculation, 3. Imputation, 4. Recalculation, 5. Flag conversion, fillcolor = LightBlue]
baselinedata [label = 'Output: \n faoswsAquastatBaseline output', shape = folder, fillcolor = Beige]
Rvali [label = 'Processing: \n find errors in faoswsAquastatBaseline output', fillcolor = LightBlue]
TUvalidation [label = 'QA/QC: \n manual check of \n faoswsAquastatValidation output \n by the technical unit', fillcolor = LightBlue]
Dissemination [label = 'Output: \n dissemination of the validated/corrected \n faoswsAquastatBaseline output' shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{Literature, otherDB } -> AWS
{Quest} -> QH
{QH, AWS} -> SWS
{SWS, FAOSTATDB} -> Rbase
{Rbase} -> baselinedata -> Rvali -> TUvalidation -> Dissemination
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
Quest[label = 'Source: \n Data from questionnaire', shape = folder, fillcolor = Beige]
Literature [label = 'Source: \n Data from literature', shape = folder, fillcolor = Beige]
otherDB [label = 'Source: \n Da from other databases', shape = folder, fillcolor = Beige]
QH [label = 'Processing: \n Questionnaire harvesting \n by CIO - SWS', shape = folder, fillcolor = LightBlue]
AWS [label = 'Source: \n Aquastat Working System', shape = folder, fillcolor = Beige]
SWS [label = 'Source: \n Statistical Working System \n must have \n 1. geographicAreaM49, 2. aquastatElement, 3. timePointYears, 4. flagObservationStatus or flagAquastat', shape = folder, fillcolor = Beige]
FAOSTATDB [label = 'Processing: \n FAOSTAT data', shape = folder, fillcolor = Beige]
Rbase [label = 'Processing: \n faoswsAquastatBaseline \n 1. FAOSTAT annexation, 2. Calculation, 3. Imputation, 4. Recalculation, 5. Flag conversion', fillcolor = LightBlue]
baselinedata [label = 'Output: \n faoswsAquastatBaseline output', shape = folder, fillcolor = Beige]
Rvali [label = 'Processing: \n find errors in faoswsAquastatBaseline output', fillcolor = LightBlue]
TUvalidation [label = 'QA/QC: \n manual check of \n faoswsAquastatValidation output \n by the technical unit', fillcolor = LightBlue]
Dissemination [label = 'Output: \n dissemination of the validated/corrected \n faoswsAquastatBaseline output' shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{Literature, otherDB } -> AWS
{Quest} -> QH
{QH, AWS} -> SWS
{SWS, FAOSTATDB} -> Rbase
{Rbase} -> baselinedata -> Rvali -> TUvalidation -> Dissemination
}")
library(DiagrammeR)
DiagrammeR::grViz("digraph {
graph [layout = dot, rankdir = TB]
# define the global styles of the nodes. We can override these in box if we wish
node [shape = rectangle, style = filled, fillcolor = Linen]
# Inputs
Quest[label = 'Source: \n Data from questionnaire', shape = folder, fillcolor = Beige]
Literature [label = 'Source: \n Data from literature', shape = folder, fillcolor = Beige]
otherDB [label = 'Source: \n Da from other databases', shape = folder, fillcolor = Beige]
QH [label = 'Processing: \n Questionnaire harvesting \n by CIO - SWS', shape = folder, fillcolor = LightBlue]
AWS [label = 'Database: \n Aquastat Working System', shape = folder, fillcolor = Beige]
SWS [label = 'Database: \n Statistical Working System \n Dataset MUST have: \n 1. geographicAreaM49, 2. aquastatElement, 3. timePointYears, 4. flagObservationStatus or flagAquastat', shape = folder, fillcolor = Beige]
FAOSTATDB [label = 'Source: \n FAOSTAT database', shape = folder, fillcolor = Beige]
Rbase [label = 'Processing: \n faoswsAquastatBaseline \n 1. FAOSTAT annexation, 2. Calculation, 3. Imputation, 4. Recalculation, 5. Flag conversion', fillcolor = LightBlue]
baselinedata [label = 'Output: \n faoswsAquastatBaseline output', shape = folder, fillcolor = Beige]
Rvali [label = 'Processing: \n find errors in \n faoswsAquastatBaseline output \n using faoswsAquastatValidation module', fillcolor = LightBlue]
TUvalidation [label = 'QA/QC: \n manual check of \n faoswsAquastatValidation output \n by the technical unit', fillcolor = LightBlue]
Dissemination [label = 'Output: \n dissemination of the validated/corrected \n faoswsAquastatBaseline output' shape = folder, fillcolor = Beige]
# Flow
# edge definitions with the node IDs
{Literature, otherDB } -> AWS
{Quest} -> QH
{QH, AWS} -> SWS
{SWS, FAOSTATDB} -> Rbase
{Rbase} -> baselinedata -> Rvali -> TUvalidation -> Dissemination
}")
