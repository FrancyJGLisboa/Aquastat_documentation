<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AQUASTAT in SWS: proposed dataflow | Migration of AQUASTAT Statistical Processes into the SWS</title>
  <meta name="description" content="This online book describes the migration the statistical processes associated with the AQUASTAT - FAO Global’s Water Information System into the Corporate Statistical Working System (SWS)">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="AQUASTAT in SWS: proposed dataflow | Migration of AQUASTAT Statistical Processes into the SWS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This online book describes the migration the statistical processes associated with the AQUASTAT - FAO Global’s Water Information System into the Corporate Statistical Working System (SWS)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="AQUASTAT in SWS: proposed dataflow | Migration of AQUASTAT Statistical Processes into the SWS" />
  
  <meta name="twitter:description" content="This online book describes the migration the statistical processes associated with the AQUASTAT - FAO Global’s Water Information System into the Corporate Statistical Working System (SWS)" />
  

<meta name="author" content="Francy Lisboa (ESSD - Methodological Innovation Team)">


<meta name="date" content="2019-03-20">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="new-aquastat-methodology.html">
<link rel="next" href="sws-resources.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>



<link rel="stylesheet" href="ess.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#introduction"><strong>Introduction</strong></a></li>
<li><a href="migration-actors.html#migration-actors"><strong>Migration actors</strong></a></li>
<li><a href="new-aquastat-methodology.html#new-aquastat-methodology"><strong>New AQUASTAT methodology</strong></a><ul>
<li><a href="new-aquastat-methodology.html#data-collection"><strong>Data Collection</strong></a></li>
<li><a href="new-aquastat-methodology.html#questionnaire"><strong>Questionnaire</strong></a></li>
<li><a href="new-aquastat-methodology.html#the-current-aquastat-information-management"><strong>The current AQUASTAT information management</strong></a></li>
</ul></li>
<li><a href="aquastat-in-sws-proposed-dataflow.html#aquastat-in-sws-proposed-dataflow"><strong>AQUASTAT in SWS: proposed dataflow</strong></a></li>
<li><a href="sws-resources.html#sws-resources"><strong>SWS resources</strong></a><ul>
<li><a href="sws-resources.html#code-lists"><strong>Code lists</strong></a></li>
<li><a href="sws-resources.html#data-tables"><strong>Data tables</strong></a></li>
<li><a href="sws-resources.html#datasets"><strong>Datasets</strong></a></li>
</ul></li>
<li><a href="aquastat-elements.html#aquastat-elements"><strong>AQUASTAT Elements</strong></a><ul>
<li><a href="aquastat-elements.html#international-classification-systems"><strong>International Classification Systems</strong></a></li>
<li><a href="aquastat-elements.html#the-sws-aquastat_reference-data-table"><strong>The SWS aquastat_reference data table</strong></a><ul>
<li><a href="aquastat-elements.html#current-aquastat-variables"><strong>Current AQUASTAT Variables</strong></a></li>
<li><a href="aquastat-elements.html#current-aquastat-indicators"><strong>Current AQUASTAT indicators</strong></a></li>
<li><a href="aquastat-elements.html#current-external-data"><strong>Current External data</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html"><i class="fa fa-check"></i><b>1</b> <strong>The faoswsAquastatBaseline module</strong></a><ul>
<li class="chapter" data-level="1.1" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#aim"><i class="fa fa-check"></i><b>1.1</b> <strong>Aim</strong></a><ul>
<li class="chapter" data-level="1.1.1" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#identify-ltas"><i class="fa fa-check"></i><b>1.1.1</b> <strong>Identify LTAs</strong></a></li>
<li class="chapter" data-level="1.1.2" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#calculations-before"><i class="fa fa-check"></i><b>1.1.2</b> <strong>Calculations before</strong></a></li>
<li class="chapter" data-level="1.1.3" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#corrections"><i class="fa fa-check"></i><b>1.1.3</b> <strong>Corrections</strong></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#workflow"><i class="fa fa-check"></i><b>1.2</b> <strong>Workflow</strong></a></li>
<li class="chapter" data-level="1.3" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#running-the-module"><i class="fa fa-check"></i><b>1.3</b> <strong>Running the module</strong></a></li>
<li class="chapter" data-level="1.4" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#did-the-module.."><i class="fa fa-check"></i><b>1.4</b> <strong>Did the module..</strong></a><ul>
<li class="chapter" data-level="1.4.1" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#correct-values-of-long-term-average-variables"><i class="fa fa-check"></i><b>1.4.1</b> correct values of Long-Term Average variables ?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="AquastatBaseline.html"><a href="AquastatBaseline.html#output-feeds"><i class="fa fa-check"></i><b>1.5</b> <strong>Output feeds…</strong></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="AquastatValidation.html"><a href="AquastatValidation.html"><i class="fa fa-check"></i><b>2</b> <strong>The faoswsAquastatValidation module</strong></a><ul>
<li class="chapter" data-level="2.1" data-path="AquastatValidation.html"><a href="AquastatValidation.html#aims"><i class="fa fa-check"></i><b>2.1</b> <strong>Aims</strong></a><ul>
<li class="chapter" data-level="2.1.1" data-path="AquastatValidation.html"><a href="AquastatValidation.html#use-validation-rules"><i class="fa fa-check"></i><b>2.1.1</b> <strong>Use validation rules</strong></a></li>
<li class="chapter" data-level="2.1.2" data-path="AquastatValidation.html"><a href="AquastatValidation.html#focus-on-high-priority-rules"><i class="fa fa-check"></i><b>2.1.2</b> <strong>Focus on high priority rules</strong></a></li>
<li class="chapter" data-level="2.1.3" data-path="AquastatValidation.html"><a href="AquastatValidation.html#output-as-an-email-attachment"><i class="fa fa-check"></i><b>2.1.3</b> <strong>Output as an email attachment</strong></a></li>
<li class="chapter" data-level="2.1.4" data-path="AquastatValidation.html"><a href="AquastatValidation.html#generalization"><i class="fa fa-check"></i><b>2.1.4</b> <strong>Generalization</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="AquastatValidation.html"><a href="AquastatValidation.html#workflow-1"><i class="fa fa-check"></i><b>2.2</b> <strong>Workflow</strong></a><ul>
<li class="chapter" data-level="2.2.1" data-path="AquastatValidation.html"><a href="AquastatValidation.html#the-input-dataset"><i class="fa fa-check"></i><b>2.2.1</b> The input dataset</a></li>
<li class="chapter" data-level="2.2.2" data-path="AquastatValidation.html"><a href="AquastatValidation.html#apply-validation-rules"><i class="fa fa-check"></i><b>2.2.2</b> Apply validation rules</a></li>
<li class="chapter" data-level="2.2.3" data-path="AquastatValidation.html"><a href="AquastatValidation.html#output-to-the-user"><i class="fa fa-check"></i><b>2.2.3</b> Output to the user</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="AquastatValidation.html"><a href="AquastatValidation.html#running-the-module-in-the-sws"><i class="fa fa-check"></i><b>2.3</b> <strong>Running the module in the SWS</strong></a></li>
<li class="chapter" data-level="2.4" data-path="AquastatValidation.html"><a href="AquastatValidation.html#did-the-module"><i class="fa fa-check"></i><b>2.4</b> <strong>Did the module</strong>…</a><ul>
<li class="chapter" data-level="2.4.1" data-path="AquastatValidation.html"><a href="AquastatValidation.html#execute-what-it-was-designed-for"><i class="fa fa-check"></i><b>2.4.1</b> execute what it was designed for?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="External.html"><a href="External.html"><i class="fa fa-check"></i><b>3</b> <strong>The faoswsAquastaUpdate module</strong></a><ul>
<li class="chapter" data-level="3.1" data-path="External.html"><a href="External.html#aims-1"><i class="fa fa-check"></i><b>3.1</b> <strong>Aims</strong></a><ul>
<li class="chapter" data-level="3.1.1" data-path="External.html"><a href="External.html#download-external-data"><i class="fa fa-check"></i><b>3.1.1</b> <strong>Download external data</strong></a></li>
<li class="chapter" data-level="3.1.2" data-path="External.html"><a href="External.html#reshape-data"><i class="fa fa-check"></i><b>3.1.2</b> <strong>Reshape data</strong></a></li>
<li class="chapter" data-level="3.1.3" data-path="External.html"><a href="External.html#mapping-data"><i class="fa fa-check"></i><b>3.1.3</b> <strong>Mapping data</strong></a></li>
<li class="chapter" data-level="3.1.4" data-path="External.html"><a href="External.html#save-data"><i class="fa fa-check"></i><b>3.1.4</b> <strong>Save data</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="External.html"><a href="External.html#workflow-2"><i class="fa fa-check"></i><b>3.2</b> <strong>Workflow</strong></a></li>
<li class="chapter" data-level="3.3" data-path="External.html"><a href="External.html#running-the-module-1"><i class="fa fa-check"></i><b>3.3</b> <strong>Running the module</strong></a></li>
<li class="chapter" data-level="3.4" data-path="External.html"><a href="External.html#did-the-module..-1"><i class="fa fa-check"></i><b>3.4</b> <strong>Did the module..</strong></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html"><i class="fa fa-check"></i><b>4</b> <strong>The faoswsAquastaUpdate module</strong></a><ul>
<li class="chapter" data-level="4.1" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#aims-2"><i class="fa fa-check"></i><b>4.1</b> <strong>Aims</strong></a><ul>
<li class="chapter" data-level="4.1.1" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#harmonize-dimensions"><i class="fa fa-check"></i><b>4.1.1</b> <strong>Harmonize dimensions</strong></a></li>
<li class="chapter" data-level="4.1.2" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#replacesupdates-the-legacy-data"><i class="fa fa-check"></i><b>4.1.2</b> <strong>replaces/updates the legacy data</strong></a></li>
<li class="chapter" data-level="4.1.3" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#does-calculations"><i class="fa fa-check"></i><b>4.1.3</b> <strong>Does Calculations</strong></a></li>
<li class="chapter" data-level="4.1.4" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#applies-primary-variable-approach"><i class="fa fa-check"></i><b>4.1.4</b> <strong>Applies Primary Variable Approach</strong></a></li>
<li class="chapter" data-level="4.1.5" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#applies-imputations"><i class="fa fa-check"></i><b>4.1.5</b> <strong>Applies imputations</strong></a></li>
<li class="chapter" data-level="4.1.6" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#recalculation"><i class="fa fa-check"></i><b>4.1.6</b> <strong>Recalculation</strong></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#flag-mapping-observation"><i class="fa fa-check"></i><b>4.2</b> <strong>Flag mapping (Observation)</strong></a><ul>
<li class="chapter" data-level="4.2.1" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#flag-mapping-method"><i class="fa fa-check"></i><b>4.2.1</b> <strong>Flag mapping (Method)</strong></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#workflow-3"><i class="fa fa-check"></i><b>4.3</b> <strong>Workflow</strong></a></li>
<li class="chapter" data-level="4.4" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#running-the-module-2"><i class="fa fa-check"></i><b>4.4</b> <strong>Running the module</strong></a></li>
<li class="chapter" data-level="4.5" data-path="AquastatUpdate.html"><a href="AquastatUpdate.html#did-the-module-1"><i class="fa fa-check"></i><b>4.5</b> <strong>Did the module…</strong></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="next.html"><a href="next.html"><i class="fa fa-check"></i><b>5</b> <strong>Next</strong></a><ul>
<li class="chapter" data-level="5.1" data-path="next.html"><a href="next.html#pending-activities"><i class="fa fa-check"></i><b>5.1</b> <strong>Pending activities</strong></a><ul>
<li class="chapter" data-level="5.1.1" data-path="next.html"><a href="next.html#faoswsaquastatexternal-module."><i class="fa fa-check"></i><b>5.1.1</b> faoswsAquastatExternal module.</a></li>
<li class="chapter" data-level="5.1.2" data-path="next.html"><a href="next.html#national-dam-capacity-time-series-using-sws-dam-data-table"><i class="fa fa-check"></i><b>5.1.2</b> National dam capacity time-series (using SWS dam data table)</a></li>
<li class="chapter" data-level="5.1.3" data-path="next.html"><a href="next.html#aggregations"><i class="fa fa-check"></i><b>5.1.3</b> Aggregations</a></li>
<li class="chapter" data-level="5.1.4" data-path="next.html"><a href="next.html#timeline"><i class="fa fa-check"></i><b>5.1.4</b> Timeline</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Migration of AQUASTAT Statistical Processes into the SWS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="aquastat-in-sws-proposed-dataflow" class="section level1 unnumbered">
<h1><strong>AQUASTAT in SWS: proposed dataflow</strong></h1>
<p>AQUASTAT dataflow will predominatly be triggered by the filling and compilation of the <strong>Water and Agriculture questionnaire</strong> by the AQUASTAT network of National Correspondents. The CIO - SWS counterpart is the responsible for creating tailored questionnaire harvesters to automatically extract data from filled questionnaires and output it as an SWS compliant dataset. Once in the SWS, the technical will benefit from the tools and other features that have been developed to make the AQUASTAT dataflow as seamless as possible. On this basis, the flowchart below gives the AQUASTAT dataflow that has been fostered by the ESS - SWS team.</p>
<div class="figure"><span id="fig:fig2"></span>
<div id="htmlwidget-12dd828db0b412266a80" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-12dd828db0b412266a80">{"x":{"diagram":"digraph {\n\ngraph [layout = dot, rankdir = TB]\n\n# define the global styles of the nodes. We can override these in box if we wish\nnode [shape = rectangle, style = filled, fillcolor = Linen]\n\n# Inputs\ncoordination [label = \"Source \n coordination \n between agencies\", shape = folder, fillcolor = Beige]\nSurveys [label = \"Source \n Country surveys \n and census\", shape = folder, fillcolor = Beige]\nLiterature [label = \"Source \n Literature review\", shape = folder, fillcolor = Beige]\n\nfocalpoint [label = \"Compilation: \n questionnaire filling \n by AQUASTAT \n national correspondent\", shape = folder, fillcolor = Beige]\n\nSWSQH [label = \"Harvester: \n questionnaire harvesting \n by CIO - SWS\", fillcolor = LightBlue]\n\nNewdata [label = \"Dataset: \n data harvested from questionnaire \n and SWS compliant\", shape = folder, fillcolor = Beige]\n\nQA1 [label = \"QAQC \n Manual Quality control \n of data harvested from questionnaire\", fillcolor = PaleGreen]\n\nNewdata_val [label = \"Dataset: \n validated questionnaire data\", shape = folder, fillcolor = Beige]\n\nAPIsourcing [label = \"Process: \n faoswsAquastatExternal module\", fillcolor = PaleGreen]\n\nAPIdata [label = \"Dataset: \n AQUASTAT data from external sources\", shape = folder, fillcolor = Beige]\n\noldsystem [label = \"Database: \n Old Aquastat Working System\", shape = folder, fillcolor = Beige]\n\nMigration [label = \"Migration: \n legacy data into the SWS \n done by CIO - SWS\", fillcolor = LightBlue]\n\nlegacydata [label = \"Dataset: \n aquastat_legacy dataset \", shape = folder, fillcolor = Beige]\n\n\nfaobaselineM [label = \"Process: \n SWS faoswsAquastatBaseline module \n (runs only once to correct LTAs \n in the legacy data)\",  fillcolor = PaleGreen]\n\nfaobaseline [label = \"Dataset: \n SWS aquastat_baseline dataset \n (the legacy data corrected for LTAs)\", shape = folder, fillcolor = Beige]\n\nupdate [label = \"Process:: \n SWS faoswsAquastatUpdate module: \n 1. merges the questionnaire data, external data, and aquastat_baseline \n 2. flag conversion, \n 3. apply calculations, 4. impute data, 5.  apply recalculation\", shape = square, fillcolor = PaleGreen]\n\nupdateddata [label = \"Dataset: \n updated aquastat_baseline dataset \n from SWS faoswsAquastatUpdate module \", shape = folder, fillcolor = Beige]\n\n\nQA2 [label = \"Process: \n Automate Quality control \n by faoswsAquatsatValidation module\", fillcolor = PaleGreen]\n\nvalidationemail [label = \"Dataset: \n Validation output \n sent to the user by email (.csv file)\", shape = folder, fillcolor = Beige]\n\nQA3 [label = \"Process: \n Manual Quality control \n of faoswsAquatsatValidation module output\", fillcolor = PaleGreen]\n\nvalidated [label = \"Dataset: \n updated aquastat_baseline \n cleared by technical division\", shape = folder, fillcolor = Beige]\n\nAQUASWSdb [label = \"Dataset: \n updated AQUASTAT dataset \n saved in the SWS database\", shape = folder, fillcolor = Beige]\n\nDiss [label = \"Dissemination: \n  Web, publications, Apps\", shape = folder, fillcolor = LightGrey]\n\n\n# Flow\n# edge definitions with the node IDs\n{coordination, Surveys, Literature} -> focalpoint -> SWSQH -> Newdata -> QA1 -> Newdata_val -> update\n{oldsystem} -> Migration -> legacydata -> faobaselineM -> faobaseline\n{APIsourcing} -> APIdata -> update \n{faobaseline} -> update -> updateddata -> QA2 -> validationemail -> QA3 -> validated -> AQUASWSdb -> Diss\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure .: Proposed AQUATAST - SWS dataflow
</p>
</div>
<div class="rmdnote">
<p>
Notice that the questionnaire harvester produced by CIO - SWS counterpart represents the first contact of the questionnaire - based data with the SWS. The harvester outputs an SWS compliant dataset that goes through the chain of SWS processes where inputs and outputs datasets are also adhering to SWS standards.
</p>
<p>
Apart from the questionnaire harvesting, the processes in green are those performed by AQUASTAT modules <strong>already operating in the QA environment in the SWS</strong>. The <strong>faoswsAquastatUpdate module</strong> is yet to be built after the final endorsement of the faoswsAquastaBaseline output by the technical unit.
</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="new-aquastat-methodology.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sws-resources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
